-- Tabela de detecções
CREATE TABLE detections (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    image VARCHAR2(255) NOT NULL,
    detections NUMBER DEFAULT 0,
    sent DATE DEFAULT SYSDATE,
    timestamp TIMESTAMP DEFAULT SYSTIMESTAMP,
    post_latency_ms NUMBER
);

-- Tabela de sensores (exemplo se você tiver sensores)
CREATE TABLE sensors (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    sensor_name VARCHAR2(50) NOT NULL,
    sensor_type VARCHAR2(50),
    location VARCHAR2(100),
    last_value NUMBER,
    last_update TIMESTAMP
);

-- Tabela de cidades / localizações
CREATE TABLE locations (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    city VARCHAR2(50) NOT NULL,
    state CHAR(2),
    latitude NUMBER(9,6),
    longitude NUMBER(9,6)
);

-- Tabela de ocorrências (simplificada)
CREATE TABLE occurrences (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    description VARCHAR2(255) NOT NULL,
    location_id NUMBER REFERENCES locations(id),
    weather VARCHAR2(50),
    severity_level NUMBER,
    detection_id NUMBER REFERENCES detections(id)
);

-- Tabela de logs (opcional para monitorar envio)
CREATE TABLE logs (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    message VARCHAR2(255),
    log_time TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- -----------------------------
-- Inserindo dados em locations
-- -----------------------------
INSERT INTO locations (city, state, latitude, longitude) VALUES ('São Paulo', 'SP', -23.550520, -46.633308);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Rio de Janeiro', 'RJ', -22.906847, -43.172896);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Belo Horizonte', 'MG', -19.916681, -43.934493);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Curitiba', 'PR', -25.428954, -49.267137);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Porto Alegre', 'RS', -30.034647, -51.217658);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Recife', 'PE', -8.047562, -34.877);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Fortaleza', 'CE', -3.731862, -38.526669);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Salvador', 'BA', -12.9714, -38.5014);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Brasília', 'DF', -15.793889, -47.882778);
INSERT INTO locations (city, state, latitude, longitude) VALUES ('Manaus', 'AM', -3.119028, -60.021731);

-- -----------------------------
-- Inserindo dados em sensors
-- -----------------------------
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 SP', 'temperature', 'São Paulo', 25, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 RJ', 'humidity', 'Rio de Janeiro', 80, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('BMP280 BH', 'pressure', 'Belo Horizonte', 1013, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 Curitiba', 'temperature', 'Curitiba', 22, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 Porto Alegre', 'humidity', 'Porto Alegre', 70, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('BMP280 Recife', 'pressure', 'Recife', 1012, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 Fortaleza', 'temperature', 'Fortaleza', 28, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 Salvador', 'humidity', 'Salvador', 75, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('BMP280 Brasília', 'pressure', 'Brasília', 1015, SYSTIMESTAMP);
INSERT INTO sensors (sensor_name, sensor_type, location, last_value, last_update) VALUES ('DHT22 Manaus', 'temperature', 'Manaus', 30, SYSTIMESTAMP);

-- -----------------------------
-- Inserindo dados em detections
-- -----------------------------
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img001.jpg', 2, 150);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img002.jpg', 0, 120);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img003.jpg', 1, 200);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img004.jpg', 3, 180);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img005.jpg', 0, 110);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img006.jpg', 4, 220);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img007.jpg', 1, 130);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img008.jpg', 2, 160);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img009.jpg', 0, 100);
INSERT INTO detections (image, detections, post_latency_ms) VALUES ('img010.jpg', 3, 190);

-- -----------------------------
-- Inserindo dados em occurrences
-- -----------------------------
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Enchente', 1, 'Chuva forte', 3, 1);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Deslizamento', 2, 'Chuva moderada', 4, 2);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Alagamento', 3, 'Chuva leve', 2, 3);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Enchente', 4, 'Chuva forte', 5, 4);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Deslizamento', 5, 'Chuva moderada', 3, 5);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Alagamento', 6, 'Chuva leve', 2, 6);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Enchente', 7, 'Chuva forte', 4, 7);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Deslizamento', 8, 'Chuva moderada', 3, 8);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Alagamento', 9, 'Chuva leve', 1, 9);
INSERT INTO occurrences (description, location_id, weather, severity_level, detection_id) VALUES ('Enchente', 10, 'Chuva forte', 5, 10);

-- -----------------------------
-- Inserindo dados em logs
-- -----------------------------
INSERT INTO logs (message) VALUES ('Sistema iniciado');
INSERT INTO logs (message) VALUES ('Sensor SP atualizado');
INSERT INTO logs (message) VALUES ('Detecção img001.jpg enviada');
INSERT INTO logs (message) VALUES ('Ocorrência registrada: Enchente');
INSERT INTO logs (message) VALUES ('Sensor RJ atualizado');
INSERT INTO logs (message) VALUES ('Detecção img002.jpg enviada');
INSERT INTO logs (message) VALUES ('Ocorrência registrada: Deslizamento');
INSERT INTO logs (message) VALUES ('Sensor BH atualizado');
INSERT INTO logs (message) VALUES ('Sistema verificado');
INSERT INTO logs (message) VALUES ('Backup realizado');
